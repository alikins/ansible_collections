# Ansible module: ansible.module_consul_acl


Manipulate Consul ACL keys and rules

## Description

Allows the addition, modification and deletion of ACL keys and associated rules in a consul cluster via the agent. For more details on using and configuring ACLs, see https://www.consul.io/docs/guides/acl.html.

## Requirements

TODO

## Arguments

``` json
{
    "host": "{'description': ['host of the consul agent defaults to localhost'], 'required': False, 'default': 'localhost'}",
    "mgmt_token": "{'description': ['a management token is required to manipulate the acl lists']}",
    "name": "{'description': ['the name that should be associated with the acl key, this is opaque to Consul'], 'required': False}",
    "port": "{'description': ['the port on which the consul agent is running'], 'required': False, 'default': 8500}",
    "rules": "{'description': ['a list of the rules that should be associated with a given token'], 'required': False}",
    "scheme": "{'description': ['the protocol scheme on which the consul agent is running'], 'required': False, 'default': 'http', 'version_added': '2.1'}",
    "state": "{'description': ['whether the ACL pair should be present or absent'], 'required': False, 'choices': ['present', 'absent'], 'default': 'present'}",
    "token": "{'description': ['the token key indentifying an ACL rule set. If generated by consul this will be a UUID'], 'required': False}",
    "token_type": "{'description': ['the type of token that should be created, either management or client'], 'choices': ['client', 'management'], 'default': 'client'}",
    "validate_certs": "{'description': ['whether to verify the tls certificate of the consul agent'], 'required': False, 'default': True, 'version_added': '2.1'}",
}
```

## Examples


``` yaml

- name: create an ACL with rules
  consul_acl:
    host: consul1.example.com
    mgmt_token: some_management_acl
    name: Foo access
    rules:
      - key: "foo"
        policy: read
      - key: "private/foo"
        policy: deny

- name: create an ACL with a specific token
  consul_acl:
    host: consul1.example.com
    mgmt_token: some_management_acl
    name: Foo access
    token: my-token
    rules:
      - key: "foo"
        policy: read

- name: update the rules associated to an ACL token
  consul_acl:
    host: consul1.example.com
    mgmt_token: some_management_acl
    name: Foo access
    token: some_client_token
    rules:
      - event: "bbq"
        policy: write
      - key: "foo"
        policy: read
      - key: "private"
        policy: deny
      - keyring: write
      - node: "hgs4"
        policy: write
      - operator: read
      - query: ""
        policy: write
      - service: "consul"
        policy: write
      - session: "standup"
        policy: write

- name: remove a token
  consul_acl:
    host: consul1.example.com
    mgmt_token: some_management_acl
    token: 172bd5c8-9fe9-11e4-b1b0-3c15c2c9fd5e
    state: absent

```

## License

TODO

## Author Information
  - ['Steve Gargan (@sgargan)', 'Colin Nolan (@colin-nolan)']
  - ['Steve Gargan (@sgargan)', 'Colin Nolan (@colin-nolan)']
